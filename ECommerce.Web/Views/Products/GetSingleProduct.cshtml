@model ECommerce.DomainModel.Product
@using ECommerce.DomainModel
@using ECommerce.Data;
@using ECommerce.Data.DatabaseContext;
@{
    ViewBag.Title = "GetSingleProduct";
    UnitOfWork<MyDbContext> db = new UnitOfWork<MyDbContext>();


    IEnumerable<ShowProductFeatureViewModel> test = Model.Product_Features.Distinct().Select(pf => new ShowProductFeatureViewModel()
    {
        FeatureTitle = pf.Features.FeatureTitle,
        Values = db.Product_FeatureRepository.GetAll().Where(fe => fe.FeatureID == pf.FeatureID).Select(fe => fe.Value).ToList()
    }).ToList();

    foreach (var item in test)
    {
        <h2>@item.FeatureTitle</h2>

            <h2> @string.Join(" - ",item.Values)</h2>
     

    }


}

<div>
    <h1 class="title">@Model.ProductTitle</h1>
    <div class="row product-info">
        <div class="col-sm-6">
            <div class="image"><img class="img-responsive" itemprop="image" id="zoom_01" src="/Images/ProductImages/@Model.ImageName" title="لپ تاپ ایلین ور" alt="لپ تاپ ایلین ور" data-zoom-image="image/product/macbook_air_1-500x500.jpg" /> </div>
            <div class="center-block text-center"><span class="zoom-gallery"><i class="fa fa-search"></i> برای مشاهده گالری روی تصویر کلیک کنید</span></div>

            @if (Model.ProductGaleries.Any())
            {
                <div class="image-additional" id="gallery_01">
                    @foreach (var item in Model.ProductGaleries)
                    {
                        <a class="thumbnail" href="#" data-zoom-image="image/product/macbook_air_1-500x500.jpg" data-image="image/product/macbook_air_1-350x350.jpg" title="لپ تاپ ایلین ور"> <img src="/Images/ProductImages/@item.ImageName" title="@item.Title" alt="@item.Title" /></a>
                    }
                </div>
            }
        </div>
        <div class="col-sm-6">
            <ul class="list-unstyled description">
                <li><b>برند :</b> <a href="#"><span itemprop="brand">اپل</span></a></li>
                <li><b>کد محصول :</b> <span itemprop="mpn">محصولات 17</span></li>
                <li><b>امتیازات خرید:</b> 700</li>
                <li><b>وضعیت موجودی :</b> <span class="instock">موجود</span></li>
            </ul>
            <ul class="price-box">
                <li class="price" itemprop="offers" itemscope itemtype="http://schema.org/Offer"><span class="price-old">@Model.Price  تومان</span> <span itemprop="price">@Model.Price  تومان<span itemprop="availability" content="موجود"></span></span></li>
                <li></li>
                <li>بدون مالیات : 9 میلیون تومان</li>
            </ul>
            <div id="product">
                <h3 class="subtitle">انتخاب های در دسترس</h3>
                <div class="form-group required">
                    <label class="control-label">رنگ</label>
                    <select class="form-control" id="input-option200" name="option[200]">
                        <option value=""> --- لطفا انتخاب کنید --- </option>
                        <option value="4">مشکی </option>
                        <option value="3">نقره ای </option>
                        <option value="1">سبز </option>
                        <option value="2">آبی </option>
                    </select>
                </div>
                <div class="cart">
                    <div>
                        <div class="qty">
                            <label class="control-label" for="input-quantity">تعداد</label>
                            <input type="text" name="quantity" value="1" size="2" id="input-quantity" class="form-control" />
                            <a class="qtyBtn plus" href="javascript:void(0);">+</a><br />
                            <a class="qtyBtn mines" href="javascript:void(0);">-</a>
                            <div class="clear"></div>
                        </div>
                        <button onclick="AddToCart(@Model.ProductId)" type="button" id="button-cart" class="btn btn-primary btn-lg">افزودن به سبد</button>
                    </div>
                    <div>
                        <button type="button" class="wishlist" onClick="AddToWish(@Model.ProductId)"><i class="fa fa-heart"></i> افزودن به علاقه مندی ها</button>
                        <br />
                        <button type="button" class="wishlist" onClick=""><i class="fa fa-exchange"></i> مقایسه این محصول</button>
                    </div>
                </div>
            </div>
            <div class="rating" itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating">
                <meta itemprop="ratingValue" content="0" />
                <p><span class="fa fa-stack"><i class="fa fa-star fa-stack-1x"></i><i class="fa fa-star-o fa-stack-1x"></i></span> <span class="fa fa-stack"><i class="fa fa-star fa-stack-1x"></i><i class="fa fa-star-o fa-stack-1x"></i></span> <span class="fa fa-stack"><i class="fa fa-star fa-stack-1x"></i><i class="fa fa-star-o fa-stack-1x"></i></span> <span class="fa fa-stack"><i class="fa fa-star fa-stack-1x"></i><i class="fa fa-star-o fa-stack-1x"></i></span> <span class="fa fa-stack"><i class="fa fa-star-o fa-stack-1x"></i></span> <a onClick="$('a[href=\'#tab-review\']').trigger('click'); return false;" href=""><span itemprop="reviewCount">1 بررسی</span></a> / <a onClick="$('a[href=\'#tab-review\']').trigger('click'); return false;" href="">یک بررسی بنویسید</a></p>
            </div>
            <hr>

        </div>
    </div>
    <ul class="nav nav-tabs">
        <li class="active"><a href="#tab-description" data-toggle="tab">توضیحات</a></li>
        <li><a href="#tab-specification" data-toggle="tab">مشخصات</a></li>
        <li><a href="#tab-review" data-toggle="tab">بررسی (2)</a></li>
    </ul>
    <div class="tab-content">
        <div itemprop="description" id="tab-description" class="tab-pane active">
            <div>
                @Model.Text
            </div>
        </div>
        <div id="tab-specification" class="tab-pane">
            @if (ViewBag.ProductFeatures != null)
            {
                IEnumerable<ShowProductFeatureViewModel> list = ViewBag.ProductFeatures;

                <ul>
                    @foreach (var item in list)
                    {
                        <li> @item.FeatureTitle : @string.Join(" , ", item.Values)</li>
                    }
                </ul>
            }
        </div>
        <div id="tab-review" class="tab-pane">
            <div class="form-horizontal">
                <div id="review">
                    <div>
                        <div id="comments">
                            <div id="commentProduct">
                                @Html.Action("CreateComment", "Products", new { id = Model.ProductId })
                                <ul id="listComment">
                                    @Html.Action("ShowComments", "Products", new { id = Model.ProductId })
                                </ul>
                            </div>
                        </div>
                        <table class="table table-striped table-bordered">
                            <tbody>
                                <tr>
                                    <td style="width: 50%;"><strong><span>هاروی</span></strong></td>
                                    <td class="text-right"><span>1395/1/20</span></td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <p>ارائه راهکارها و شرایط سخت تایپ به پایان رسد وزمان مورد نیاز شامل حروفچینی دستاوردهای اصلی و جوابگوی سوالات پیوسته اهل دنیای موجود طراحی اساسا مورد استفاده قرار گیرد.</p>
                                        <div class="rating"> <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span> <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span> <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span> <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span> <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span> </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="text-right"></div>
                </div>
            </div>
        </div>
    </div>
    <h3 class="subtitle">محصولات مرتبط</h3>
    <div class="owl-carousel related_pro">
        <div class="product-thumb">
            <div class="image"><a href="product.html"><img src="image/product/samsung_tab_1-200x200.jpg" alt="تبلت ایسر" title="تبلت ایسر" class="img-responsive" /></a></div>
            <div class="caption">
                <h4><a href="product.html">تبلت ایسر</a></h4>
                <p class="price"> <span class="price-new">98000 تومان</span> <span class="price-old">240000 تومان</span> <span class="saving">-5%</span> </p>
                <div class="rating"> <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span> <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span> <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span> <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span> <span class="fa fa-stack"><i class="fa fa-star-o fa-stack-2x"></i></span> </div>
            </div>
            <div class="button-group">
                <button class="btn-primary" type="button" onClick=""><span>افزودن به سبد</span></button>
                <div class="add-to-links">
                    <button type="button" data-toggle="tooltip" title="افزودن به علاقه مندی" onClick=""><i class="fa fa-heart"></i></button>
                    <button type="button" data-toggle="tooltip" title="افزودن به مقایسه" onClick=""><i class="fa fa-exchange"></i></button>
                </div>
            </div>
        </div>
        <div class="product-thumb">
            <div class="image"><a href="product.html"><img src="image/product/macbook_pro_1-200x200.jpg" alt=" کتاب آموزش باغبانی " title=" کتاب آموزش باغبانی " class="img-responsive" /></a></div>
            <div class="caption">
                <h4><a href="product.html"> کتاب آموزش باغبانی </a></h4>
                <p class="price"> <span class="price-new">98000 تومان</span> <span class="price-old">120000 تومان</span> <span class="saving">-26%</span> </p>
            </div>
            <div class="button-group">
                <button class="btn-primary" type="button" onClick=""><span>افزودن به سبد</span></button>
                <div class="add-to-links">
                    <button type="button" data-toggle="tooltip" title="افزودن به علاقه مندی" onClick=""><i class="fa fa-heart"></i></button>
                    <button type="button" data-toggle="tooltip" title="افزودن به مقایسه" onClick=""><i class="fa fa-exchange"></i></button>
                </div>
            </div>
        </div>
        <div class="product-thumb">
            <div class="image"><a href="product.html"><img src="image/product/macbook_1-200x200.jpg" alt="آیدیا پد یوگا" title="آیدیا پد یوگا" class="img-responsive" /></a></div>
            <div class="caption">
                <h4><a href="product.html">آیدیا پد یوگا</a></h4>
                <p class="price"> 900000 تومان </p>
                <div class="rating"> <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span> <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span> <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span> <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span> <span class="fa fa-stack"><i class="fa fa-star-o fa-stack-2x"></i></span> </div>
            </div>
            <div class="button-group">
                <button class="btn-primary" type="button" onClick=""><span>افزودن به سبد</span></button>
                <div class="add-to-links">
                    <button type="button" data-toggle="tooltip" title="افزودن به علاقه مندی" onClick=""><i class="fa fa-heart"></i></button>
                    <button type="button" data-toggle="tooltip" title="افزودن به مقایسه" onClick=""><i class="fa fa-exchange"></i></button>
                </div>
            </div>
        </div>
        <div class="product-thumb">
            <div class="image"><a href="product.html"><img src="image/product/ipod_shuffle_1-200x200.jpg" alt="لپ تاپ hp پاویلیون" title="لپ تاپ hp پاویلیون" class="img-responsive" /></a></div>
            <div class="caption">
                <h4><a href="product.html">لپ تاپ hp پاویلیون</a></h4>
                <p class="price"> 122000 تومان </p>
            </div>
            <div class="button-group">
                <button class="btn-primary" type="button" onClick=""><span>افزودن به سبد</span></button>
                <div class="add-to-links">
                    <button type="button" data-toggle="tooltip" title="افزودن به علاقه مندی" onClick=""><i class="fa fa-heart"></i></button>
                    <button type="button" data-toggle="tooltip" title="افزودن به مقایسه" onClick=""><i class="fa fa-exchange"></i></button>
                </div>
            </div>
        </div>
        <div class="product-thumb">
            <div class="image"><a href="product.html"><img src="image/product/ipod_touch_1-200x200.jpg" alt="سامسونگ گلکسی s7" title="سامسونگ گلکسی s7" class="img-responsive" /></a></div>
            <div class="caption">
                <h4><a href="product.html">سامسونگ گلکسی s7</a></h4>
                <p class="price"> <span class="price-new">62000 تومان</span> <span class="price-old">122000 تومان</span> <span class="saving">-50%</span> </p>
            </div>
            <div class="button-group">
                <button class="btn-primary" type="button" onClick=""><span>افزودن به سبد</span></button>
                <div class="add-to-links">
                    <button type="button" data-toggle="tooltip" title="افزودن به علاقه مندی" onClick=""><i class="fa fa-heart"></i></button>
                    <button type="button" data-toggle="tooltip" title="افزودن به مقایسه" onClick=""><i class="fa fa-exchange"></i></button>
                </div>
            </div>
        </div>
        <div class="product-thumb">
            <div class="image"><a href="product.html"><img src="image/product/ipod_shuffle_1-200x200.jpg" alt="لپ تاپ hp پاویلیون" title="لپ تاپ hp پاویلیون" class="img-responsive" /></a></div>
            <div class="caption">
                <h4><a href="product.html">لپ تاپ hp پاویلیون</a></h4>
                <p class="price"> 122000 تومان </p>
            </div>
            <div class="button-group">
                <button class="btn-primary" type="button" onClick=""><span>افزودن به سبد</span></button>
                <div class="add-to-links">
                    <button type="button" data-toggle="tooltip" title="افزودن به علاقه مندی" onClick=""><i class="fa fa-heart"></i></button>
                    <button type="button" data-toggle="tooltip" title="افزودن به مقایسه" onClick=""><i class="fa fa-exchange"></i></button>
                </div>
            </div>
        </div>
    </div>
</div>


@section Scripts{
    <script>
        function successComment() {
            $("#Name").val("");
            $("#Email").val("");
            $("#WebSite").val("");
            $("#Comment").val("");
            $("#ParentID").val("");
        }

        function ReplyComment(id) {
            $("#ParentID").val(id);
            $("html, body").delay(2000).animate({ scrollTop: $('#commentProduct').offset().top }, 2000);
        }
    </script>
}

